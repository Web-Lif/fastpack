import React, { Suspense } from "react";
import ReactDOM from 'react-dom'

{{#if frame}}
import Bootstrap, { routers } from 'fastpack_micro/frame'
{{/if}}

const extRouters = [
    {{#each routers}}
    {
        path: '{{this.path}}',
        component: React.lazy(() => import('../pages{{this.component}}'))
    },
    {{/each}}
] as any

(window as any).g_routers = extRouters.concat(routers)

{{#if rootRender}}
ReactDOM.render(
    <Bootstrap routers={extRouters} />
    ,
    document.querySelector('#{{rootRender}}')
)
{{else}}
if (document.querySelector('#root')) {
    ReactDOM.render(
        <Bootstrap />
        ,
        document.querySelector('#root')
    )
} else {
    const root = document.createElement("div")
    root.setAttribute('id', 'root')
    root.style.width = '100%'
    root.style.height = '100%'
    document.body.appendChild(root)
    ReactDOM.render(
        <Bootstrap />
        ,
        root
    )
}
{{/if}}